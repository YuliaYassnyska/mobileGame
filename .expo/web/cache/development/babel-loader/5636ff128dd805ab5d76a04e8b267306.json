{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\test\\\\Desktop\\\\mobileGame\\\\levels\\\\LevelSecond.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Ionicons, FontAwesome, Entypo } from '@expo/vector-icons';\nimport Score from \"../components/Score\";\nimport Card from \"../components/GameCard\";\nimport helpers from \"./helpers\";\nimport firebase from \"../components/firebase\";\n\nvar LevelSecond = function (_React$Component) {\n  _inherits(LevelSecond, _React$Component);\n\n  var _super = _createSuper(LevelSecond);\n\n  function LevelSecond(props) {\n    var _this;\n\n    _classCallCheck(this, LevelSecond);\n\n    _this = _super.call(this, props);\n\n    _this.saveScore = function () {\n      if (_this.state.score > 0) {\n        firebase.db.collection('score').doc('PB959oJmX6IAKuYxUzGB').update({\n          levelTwo: true\n        }).catch(function (error) {\n          console.log(\"Error getting document:\", error);\n        });\n      } else {\n        firebase.db.collection('score').doc('PB959oJmX6IAKuYxUzGB').update({\n          levelTwo: false\n        }).catch(function (error) {\n          console.log(\"Error getting document:\", error);\n        });\n      }\n    };\n\n    _this.renderCards = _this.renderCards.bind(_assertThisInitialized(_this));\n    _this.resetCards = _this.resetCards.bind(_assertThisInitialized(_this));\n    var sources = {\n      'fontawesome': FontAwesome,\n      'entypo': Entypo,\n      'ionicons': Ionicons\n    };\n    var cards = [{\n      src: 'fontawesome',\n      name: 'heart',\n      color: 'red'\n    }, {\n      src: 'entypo',\n      name: 'feather',\n      color: '#7d4b12'\n    }, {\n      src: 'entypo',\n      name: 'flashlight',\n      color: '#f7911f'\n    }];\n    var clone = JSON.parse(JSON.stringify(cards));\n    _this.cards = cards.concat(clone);\n\n    _this.cards.map(function (obj) {\n      var id = Math.random().toString(36).substring(7);\n      obj.id = id;\n      obj.src = sources[obj.src];\n      obj.is_open = false;\n    });\n\n    _this.cards = _this.cards.shuffle();\n    _this.state = {\n      current_selection: [],\n      selected_pairs: [],\n      score: 0,\n      cards: _this.cards\n    };\n    return _this;\n  }\n\n  _createClass(LevelSecond, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.body,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, this.renderRows.call(this)), React.createElement(Score, {\n        score: this.state.score,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: styles.butt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }, React.createElement(Button, {\n        onPress: this.resetCards,\n        title: \"Reset\",\n        color: \"#424874\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: styles.butt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      }, React.createElement(Button, {\n        title: \"Next level\",\n        color: \"#424874\",\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('LevelThree');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: styles.butt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }\n      }, React.createElement(Button, {\n        title: \"Menu\",\n        color: \"#424874\",\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('MainMenu');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: styles.butt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, React.createElement(Button, {\n        title: \"Save score\",\n        color: \"#424874\",\n        onPress: function onPress() {\n          return _this2.saveScore;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      })));\n    }\n  }, {\n    key: \"resetCards\",\n    value: function resetCards() {\n      var cards = this.cards.map(function (obj) {\n        obj.is_open = false;\n        return obj;\n      });\n      cards = cards.shuffle();\n      this.setState({\n        current_selection: [],\n        selected_pairs: [],\n        cards: cards,\n        score: 0\n      });\n    }\n  }, {\n    key: \"renderRows\",\n    value: function renderRows() {\n      var _this3 = this;\n\n      var contents = this.getRowContents(this.state.cards);\n      return contents.map(function (cards, index) {\n        return React.createElement(View, {\n          key: index,\n          style: styles.row,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }\n        }, _this3.renderCards(cards));\n      });\n    }\n  }, {\n    key: \"renderCards\",\n    value: function renderCards(cards) {\n      var _this4 = this;\n\n      return cards.map(function (card, index) {\n        return React.createElement(Card, {\n          key: index,\n          src: card.src,\n          name: card.name,\n          color: card.color,\n          is_open: card.is_open,\n          clickCard: _this4.clickCard.bind(_this4, card.id),\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 17\n          }\n        });\n      });\n    }\n  }, {\n    key: \"clickCard\",\n    value: function clickCard(id) {\n      var _this5 = this;\n\n      var selected_pairs = this.state.selected_pairs;\n      var current_selection = this.state.current_selection;\n      var score = this.state.score;\n      var index = this.state.cards.findIndex(function (card) {\n        return card.id == id;\n      });\n      var cards = this.state.cards;\n\n      if (cards[index].is_open == false && selected_pairs.indexOf(cards[index].name) === -1) {\n        cards[index].is_open = true;\n        current_selection.push({\n          index: index,\n          name: cards[index].name\n        });\n\n        if (current_selection.length == 2) {\n          if (current_selection[0].name == current_selection[1].name) {\n            score += 1;\n            selected_pairs.push(cards[index].name);\n          } else {\n            cards[current_selection[0].index].is_open = false;\n            setTimeout(function () {\n              cards[index].is_open = false;\n\n              _this5.setState({\n                cards: cards\n              });\n            }, 500);\n          }\n\n          current_selection = [];\n        }\n\n        this.setState({\n          score: score,\n          cards: cards,\n          current_selection: current_selection\n        });\n      }\n    }\n  }, {\n    key: \"getRowContents\",\n    value: function getRowContents(cards) {\n      var contents_r = [];\n      var contents = [];\n      var count = 0;\n      cards.forEach(function (item) {\n        count += 1;\n        contents.push(item);\n\n        if (count == 2) {\n          contents_r.push(contents);\n          count = 0;\n          contents = [];\n        }\n      });\n      return contents_r;\n    }\n  }]);\n\n  return LevelSecond;\n}(React.Component);\n\nexport { LevelSecond as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignSelf: 'stretch',\n    backgroundColor: '#a6b1e1'\n  },\n  row: {\n    flex: 1,\n    flexDirection: 'row'\n  },\n  butt: {\n    borderStyle: 'solid',\n    borderWidth: 2,\n    borderColor: '#424874',\n    maxWidth: 200,\n    marginBottom: 20,\n    marginLeft: 90\n  },\n  body: {\n    flex: 18,\n    justifyContent: 'space-between',\n    padding: 10,\n    marginTop: 20\n  }\n});","map":{"version":3,"sources":["C:/Users/test/Desktop/mobileGame/levels/LevelSecond.js"],"names":["React","Ionicons","FontAwesome","Entypo","Score","Card","helpers","firebase","LevelSecond","props","saveScore","state","score","db","collection","doc","update","levelTwo","catch","error","console","log","renderCards","bind","resetCards","sources","cards","src","name","color","clone","JSON","parse","stringify","concat","map","obj","id","Math","random","toString","substring","is_open","shuffle","current_selection","selected_pairs","styles","container","body","renderRows","call","butt","navigation","navigate","setState","contents","getRowContents","index","row","card","clickCard","findIndex","indexOf","push","length","setTimeout","contents_r","count","forEach","item","Component","StyleSheet","create","flex","alignSelf","backgroundColor","flexDirection","borderStyle","borderWidth","borderColor","maxWidth","marginBottom","marginLeft","justifyContent","padding","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { StyleSheet, View, Button } from 'react-native';\r\nimport { Ionicons, FontAwesome, Entypo } from '@expo/vector-icons'; // 6.2.2\r\n\r\nimport Score from '../components/Score';\r\nimport Card from '../components/GameCard';\r\n\r\nimport helpers from './helpers';\r\n\r\nimport firebase from '../components/firebase'\r\nexport default class LevelSecond extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.renderCards = this.renderCards.bind(this);\r\n        this.resetCards = this.resetCards.bind(this);\r\n\r\n        let sources = {\r\n            'fontawesome': FontAwesome,\r\n            'entypo': Entypo,\r\n            'ionicons': Ionicons\r\n        };\r\n\r\n        let cards = [\r\n            {\r\n                src: 'fontawesome',\r\n                name: 'heart',\r\n                color: 'red'\r\n            },\r\n            {\r\n                src: 'entypo',\r\n                name: 'feather',\r\n                color: '#7d4b12'\r\n            },\r\n\r\n            {\r\n                src: 'entypo',\r\n                name: 'flashlight',\r\n                color: '#f7911f'\r\n            },\r\n        ];\r\n\r\n        let clone = JSON.parse(JSON.stringify(cards));\r\n\r\n        this.cards = cards.concat(clone);\r\n        this.cards.map((obj) => {\r\n            let id = Math.random().toString(36).substring(7);\r\n            obj.id = id;\r\n            obj.src = sources[obj.src];\r\n            obj.is_open = false;\r\n        });\r\n\r\n        this.cards = this.cards.shuffle();\r\n        this.state = {\r\n            current_selection: [],\r\n            selected_pairs: [],\r\n            score: 0,\r\n            cards: this.cards\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                <View style={styles.body}>\r\n                    {\r\n                        this.renderRows.call(this)\r\n                    }\r\n                </View>\r\n                <Score score={this.state.score} />\r\n                <View style={styles.butt}>\r\n                    <Button\r\n                        onPress={this.resetCards}\r\n                        title=\"Reset\"\r\n                        color=\"#424874\"\r\n                    />\r\n                </View>\r\n                <View style={styles.butt}>\r\n                    <Button\r\n                        title=\"Next level\"\r\n                        color=\"#424874\"\r\n                        onPress={() => this.props.navigation.navigate('LevelThree')}\r\n                    />\r\n                </View>\r\n                <View style={styles.butt}>\r\n                    <Button\r\n                        title=\"Menu\"\r\n                        color=\"#424874\"\r\n                        onPress={() => this.props.navigation.navigate('MainMenu')}\r\n                    />\r\n                </View>\r\n                <View style={styles.butt}>\r\n                    <Button\r\n                        title=\"Save score\"\r\n                        color=\"#424874\"\r\n                        onPress={() => this.saveScore} />\r\n                </View>\r\n            </View>\r\n        );\r\n    }\r\n\r\n\r\n    resetCards() {\r\n        let cards = this.cards.map((obj) => {\r\n            obj.is_open = false;\r\n            return obj;\r\n        });\r\n\r\n        cards = cards.shuffle();\r\n\r\n        this.setState({\r\n            current_selection: [],\r\n            selected_pairs: [],\r\n            cards: cards,\r\n            score: 0\r\n        });\r\n    }\r\n\r\n\r\n    renderRows() {\r\n\r\n        let contents = this.getRowContents(this.state.cards);\r\n        return contents.map((cards, index) => {\r\n            return (\r\n                <View key={index} style={styles.row}>\r\n                    { this.renderCards(cards)}\r\n                </View>\r\n            );\r\n        });\r\n\r\n    }\r\n\r\n\r\n    renderCards(cards) {\r\n        return cards.map((card, index) => {\r\n            return (\r\n                <Card\r\n                    key={index}\r\n                    src={card.src}\r\n                    name={card.name}\r\n                    color={card.color}\r\n                    is_open={card.is_open}\r\n                    clickCard={this.clickCard.bind(this, card.id)}\r\n                />\r\n            );\r\n        });\r\n    }\r\n\r\n\r\n    clickCard(id) {\r\n        let selected_pairs = this.state.selected_pairs;\r\n        let current_selection = this.state.current_selection;\r\n        let score = this.state.score;\r\n\r\n        let index = this.state.cards.findIndex((card) => {\r\n            return card.id == id;\r\n        });\r\n\r\n        let cards = this.state.cards;\r\n\r\n        if (cards[index].is_open == false && selected_pairs.indexOf(cards[index].name) === -1) {\r\n\r\n            cards[index].is_open = true;\r\n\r\n            current_selection.push({\r\n                index: index,\r\n                name: cards[index].name\r\n            });\r\n\r\n            if (current_selection.length == 2) {\r\n                if (current_selection[0].name == current_selection[1].name) {\r\n                    score += 1;\r\n                    selected_pairs.push(cards[index].name);\r\n                } else {\r\n\r\n                    cards[current_selection[0].index].is_open = false;\r\n\r\n                    setTimeout(() => {\r\n                        cards[index].is_open = false;\r\n                        this.setState({\r\n                            cards: cards\r\n                        });\r\n                    }, 500);\r\n                }\r\n\r\n                current_selection = [];\r\n            }\r\n\r\n            this.setState({\r\n                score: score,\r\n                cards: cards,\r\n                current_selection: current_selection\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    getRowContents(cards) {\r\n        let contents_r = [];\r\n        let contents = [];\r\n        let count = 0;\r\n        cards.forEach((item) => {\r\n            count += 1;\r\n            contents.push(item);\r\n            if (count == 2) {\r\n                contents_r.push(contents)\r\n                count = 0;\r\n                contents = [];\r\n            }\r\n        });\r\n\r\n        return contents_r;\r\n    }\r\n    saveScore = () => {\r\n        if (this.state.score > 0) {\r\n            firebase.db.collection('score').doc('PB959oJmX6IAKuYxUzGB').update({\r\n                levelTwo: true\r\n            }).catch(function (error) {\r\n                console.log(\"Error getting document:\", error);\r\n            });\r\n        } else {\r\n            firebase.db.collection('score').doc('PB959oJmX6IAKuYxUzGB').update({\r\n                levelTwo: false\r\n            }).catch(function (error) {\r\n                console.log(\"Error getting document:\", error);\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignSelf: 'stretch',\r\n        backgroundColor: '#a6b1e1'\r\n    },\r\n    row: {\r\n        flex: 1,\r\n        flexDirection: 'row'\r\n    },\r\n    butt: {\r\n        borderStyle: 'solid',\r\n        borderWidth: 2,\r\n        borderColor: '#424874',\r\n        maxWidth: 200,\r\n        marginBottom: 20,\r\n        marginLeft: 90\r\n    },\r\n    body: {\r\n        flex: 18,\r\n        justifyContent: 'space-between',\r\n        padding: 10,\r\n        marginTop: 20\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}